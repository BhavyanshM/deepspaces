<!doctype html>
<html>

    <head>
	<% include partials/head %>
    </head>
    <body>

	<div class="container" style="margin-top: 30px;">
	    <div class="col-md-4 col-md-offset-4">
		<div class="panel panel-default">
		    <div class="panel-heading"><h3 class="panel-title"><strong>Signup</strong></h3></div>
		    <div class="panel-body">
			<form id="form">
			    <div class="form-group">
				<label>Email</label>
				<input name="email" type="email" class="form-control" style="border-radius:0px" placeholder="Email...">
			    </div>

			    <div class="form-group">
				<label>Password</label>
				<input name="password" type="password" class="form-control" style="border-radius:0px" placeholder="Password...">
			    </div>

			    <button id="submit" type="button" class="btn btn-sm btn-default">Signup</button>
			    <hr>
			    <a href="/login">Already have an account? Log In</a>
			</form>
		    </div>
		</div>
	    </div>
	</div>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<script type='text/javascript'>
	    $(document).ready(function() {
		$("#submit").on('click', function() {
		    let user = {};
		    $.each($("#form").serializeArray(), function(i, field){
			user[field.name] = field.value;
		    });
		    console.log(user);
		    $.ajax({
			url: 'users/new_user',
			type: 'POST',
			dataType: 'json',
			data: JSON.stringify(user),
			success: function(result, status, xhr) {
			    console.log(result);
			    window.location = '/login';
			},
			error: function(xhr, status, error) {
			    console.log(error);
			},
			contentType: "application/json"
		    });
		});
	    });
	</script>

    </body>

</html>
